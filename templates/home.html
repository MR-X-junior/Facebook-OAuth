<!--Copyright 2025 Rahmat Adha-->
<!--Licensed under the Apache License, Version 2.0-->
<!--Nama author tidak boleh diubah atau dihapus.-->

{% extends "base.html" %}

{% block title %}Facebook OAuth - Akun Tersimpan{% endblock %}

{% block extra_js %}
<!-- SweetAlert2 CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="{{ url_for('static', filename='js/accounts.js') }}"></script>
<script src="{{ url_for('static', filename='js/export.js') }}"></script>
<script>
  window.addEventListener('DOMContentLoaded', () => {
    checkFirstVisit();
    loadAccounts();
  });
</script>
{% endblock %}

{% block content %}
<!-- Terms Modal -->
<div id="termsModal" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2><i class="fa-solid fa-file-contract"></i> Syarat & Ketentuan</h2>
      <p>Silakan baca dan setujui untuk melanjutkan</p>
    </div>
    <div class="modal-body">
      <div class="modal-section">
        <h3><i class="fa-solid fa-lock"></i> Privasi Data</h3>
        <p>Semua data Anda disimpan secara lokal di browser. Kami tidak menyimpan informasi pribadi Anda di server.</p>
      </div>
      
      <div class="modal-section">
        <h3><i class="fa-solid fa-triangle-exclamation"></i> Disclaimer</h3>
        <p>Developer tidak bertanggung jawab atas banned atau masalah yang terjadi pada akun Facebook Anda. Gunakan dengan bijak sesuai kebijakan Facebook.</p>
      </div>
      
      <div class="modal-section">
        <h3><i class="fa-solid fa-circle-check"></i> Penggunaan Token</h3>
        <p>Access token yang didapat hanya untuk keperluan pribadi. Jangan bagikan token Anda kepada pihak lain.</p>
      </div>
      
      <div class="checkbox-container">
        <input type="checkbox" id="agreeCheckbox" onchange="toggleAcceptButton()">
        <label for="agreeCheckbox">
          Saya telah membaca dan menyetujui <a href="/terms" target="_blank" style="color: #667eea;">Syarat & Ketentuan</a> serta <a href="/privacy" target="_blank" style="color: #667eea;">Kebijakan Privasi</a>. Saya memahami bahwa developer tidak bertanggung jawab atas konsekuensi penggunaan layanan ini.
        </label>
      </div>
      
      <div class="modal-actions">
        <button class="btn-modal btn-decline" onclick="declineTerms()">Tolak</button>
        <button class="btn-modal btn-accept" id="acceptBtn" disabled onclick="acceptTerms()">Setuju & Lanjutkan</button>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="header">
    <div class="logo">
      <img src="{{ url_for('static', filename='icon/logo.webp') }}"  alt="Logo Facebook OAuth" loading="eager" decoding="async">
    </div>
    
    <h1>Facebook OAuth</h1>
    <p class="subtitle">Kelola akun Facebook Anda</p>
  </div>
  
  <div class="accounts-section">
    <div class="section-title"><i class="fa-solid fa-file-lines"></i> Akun Tersimpan</div>
    <div id="accountsList"></div>
  </div>
  
  <a href="{{ auth_url }}" class="fb-btn">
    <svg class="fb-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
    </svg>
    Tambah Akun Baru
  </a>
  
  <button class="btn btn-primary" onclick="showExportModal()" style="width: 100%; margin-top: 10px; background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
    <i class="fa-solid fa-upload"></i> Ekspor Akun
  </button>
  
  <div class="copyright">
    &copy; 2025 Facebook OAuth<br>
    <div style="margin-top: 10px; font-size: 12px;">
      <a href="/privacy">Privacy Policy</a>
      <span style="color: #cbd5e0;">•</span>
      <a href="/terms">Terms of Service</a>
      <span style="color: #cbd5e0;">•</span>
      <a href="/contact">Contact</a>
    </div>
  </div>
</div>
{% endblock %}
